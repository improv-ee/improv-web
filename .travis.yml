language: php
sudo: required
services:
  - docker

cache:
  directories:
    - "$HOME/.npm"
    - "$HOME/.composer"
php:
  - 7.4

node_js: 8.9

jobs:
  include:
  - stage: "ğŸ¤– Run quality checks"
    name: "ğŸ•µï¸ Run static analysis tools on frontend JS/Vue code"
    script: .travis/static-js.sh
  - name: "ğŸ•µï¸ Run static analysis tools on backend PHP code"
    script: .travis/static-php.sh
  - name: "âœ”ï¸ Run unit tests"
    script: .travis/unittest.sh
  - stage: "ğŸ³ Create build artifacts"
    script: .travis/build-webserver.sh
    name: "ğŸ³ Build Docker webserver image"
  - name: "ğŸ“œ Create API doc"
    script: .travis/make-apidoc.sh
